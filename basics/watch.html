<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Alpine.js Course</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.14.3/dist/cdn.min.js"></script>
    <script src="app.js"></script>
  </head>
  <body class="p-4">
    <h1 class="text-xl m-3">Level 1</h1>
    <div class="m-3 mb-10">
      <p>You can "watch" a component property using the $watch magic method. For example:</p>
      <div x-data="{ open: false }" x-init="$watch('open', value => console.log(value))">
        <button @click="open = ! open">Toggle Open</button>
      </div>
    </div>

    <h1 class="text-xl m-3">Level 2</h1>
    <div class="m-3 mb-10">
      <p>
        In the above example, when the button is pressed and open is changed, the provided callback
        will fire and console.log the new value:
      </p>
      <p>You can watch deeply nested properties using "dot" notation</p>
      <div x-data="{ foo: { bar: 'baz' }}" x-init="$watch('foo.bar', value => console.log(value))">
        <button @click="foo.bar = 'bob'">Toggle Open</button>
        <p x-text="foo.bar"></p>
      </div>
    </div>

    <h1 class="text-xl m-3">Level 3 - Getting the "old" value</h1>
    <div class="m-3 mb-10">
      <p>
        $watch keeps track of the previous value of the property being watched, You can access it
        using the optional second argument to the callback like so:
      </p>
      <div
        x-data="{ open: false }"
        x-init="$watch('open', (value, oldValue) => console.log(value, oldValue))"
      >
        <button @click="open = ! open">Toggle Open</button>
      </div>
    </div>
  </body>
</html>
